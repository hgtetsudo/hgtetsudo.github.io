<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JGSDF Mission Board</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {
        margin: 0;
        font-family: "Courier New", monospace;
        background: #ffffff;
        color: #000000;
    }
    #bootScreen {
        position: fixed;
        inset: 0;
        background: #000;
        color: #0f0;
        padding: 30px;
        font-size: 20px;
        white-space: pre-wrap;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    h1 {
        text-align: center;
        margin-top: 10px;
        font-size: 28px;
    }
    .section-title {
        background: #000;
        color: #fff;
        padding: 8px;
        margin: 20px 0 5px;
        font-size: 18px;
    }
    .mission {
        border: 1px solid #000;
        padding: 10px;
        margin: 8px;
        cursor: pointer;
        transition: 0.1s;
    }
    .mission:hover {
        background: #eee;
    }
    #acceptedSection {
        background: #f0f0f0;
        padding: 10px;
        border-top: 2px solid #000;
    }
    #briefingBox {
        padding: 20px;
        border: 2px solid #000;
        background: #fff;
        position: fixed;
        top: 20%;
        left: 10%;
        right: 10%;
        display: none;
    }
    button {
        padding: 10px;
        border: 1px solid #000;
        background: #fff;
        cursor: pointer;
        margin-top: 10px;
    }
    button:hover {
        background: #ddd;
    }
    #headerStats {
        text-align: center;
        margin: 10px;
        font-size: 16px;
    }
</style>

</head>
<body>

<div id="bootScreen"></div>

<h1>JGSDF Mission Board</h1>

<div id="headerStats">
    XP: <span id="xp"></span> |
    Streak: <span id="streak"></span> days
</div>

<div class="section-title">DAILY MISSIONS</div>
<div id="daily"></div>

<div class="section-title">WEEKLY MISSIONS</div>
<div id="weekly"></div>

<div class="section-title">BONUS MISSIONS</div>
<div id="bonus"></div>

<div class="section-title">ACCEPTED MISSIONS</div>
<div id="acceptedSection"></div>

<div id="briefingBox">
    <div id="briefingText"></div>
    <button onclick="confirmComplete()">Confirm Completion</button>
    <button onclick="closeBriefing()">Cancel</button>
</div>

<script>
/* ----------------------------------------
   LONG MISSION POOLS (30+ each)
------------------------------------------ */

const dailyPool = [
    "Make bed with military precision",
    "10 push-ups, 10 sit-ups",
    "Organize desk",
    "Bike recon: 5 minutes",
    "Stretch before sleep",
    "Hydrate mission: drink 1 bottle",
    "Tidy room fast-clean",
    "Write 1-sentence log",
    "Quick wardrobe inspection",
    "Check weather for next day",
    "5-minute deep breathing",
    "Plan tomorrow schedule",
    "Wipe surfaces dust check",
    "Light room patrol",
    "Compact bag loadout check",
    "Prepare water bottle",
    "Set alarm",
    "Review mission board",
    "Laundry check",
    "Floor inspection",
    "Phone battery ready check",
    "Organize cables",
    "Window check",
    "Door security check",
    "Trash disposal",
    "Gear maintenance",
    "Hydration refill",
    "Quick meditation",
    "5-minute silent patrol",
    "Backpack cleanout"
];

const weeklyPool = [
    "Full room organization",
    "Bike maintenance check",
    "Clothing fold + arrangement",
    "Change bedding",
    "Digital cleanup: apps/files",
    "Do laundry",
    "Desk deep-clean",
    "Plan weekly goals",
    "Inspect room inventory",
    "Fix something broken",
    "Clean floor thoroughly",
    "Organize drawers",
    "Gear deep maintenance",
    "Review last week's logs",
    "Plan next week missions",
    "Wash bike",
    "Emergency bag check",
    "Social duty: message someone",
    "Restock consumables",
    "Trash deep takeout",
    "Bathroom cleaning",
    "Window cleaning",
    "Shoe maintenance",
    "Closet organization",
    "Meal prep planning",
    "Budget check",
    "Health check",
    "Long walk mission",
    "Bike long patrol",
    "Deep focus session"
];

const bonusPool = [
    "Special recon mission outside",
    "Random kindness operation",
    "30 push-ups challenge",
    "Room redesign idea",
    "Write full mission log",
    "Organize cables perfectly",
    "Super-clean desk",
    "10-minute meditation",
    "Special bike patrol",
    "Night discipline exercise",
    "Declutter 20 items",
    "Backup data mission",
    "Mini research assignment",
    "1-hour discipline focus",
    "Laundry bonus cycle",
    "Learn something new",
    "Review JGSDF ranks",
    "Improve posture check",
    "Upgrade room item",
    "Write a motivational line",
    "Hydration marathon",
    "5-minute freeze discipline",
    "Phone declutter",
    "Stretching full set",
    "Mission board improvement",
    "Light workout bonus",
    "Room blackout check",
    "Gear photo documentation",
    "New tactical habit",
    "Clean bike chain"
];

/* ----------------------------------------
   STATE & PERSISTENCE
------------------------------------------ */

let state = JSON.parse(localStorage.getItem("missionState")) || {
    dailyGenerated: "",
    weeklyGenerated: "",
    daily: [],
    weekly: [],
    bonus: [],
    accepted: [],
    xp: 0,
    streak: 0,
    lastCompletionDate: ""
};

function saveState() {
    localStorage.setItem("missionState", JSON.stringify(state));
}

/* ----------------------------------------
   AUTO GENERATION
------------------------------------------ */

function newDay() {
    state.daily = pickRandom(dailyPool, 5);
    state.dailyGenerated = today();
    saveState();
}

function newWeek() {
    state.weekly = pickRandom(weeklyPool, 5);
    state.weeklyGenerated = weekID();
    saveState();
}

function randomBonus() {
    if (Math.random() < 0.25) {
        const b = pickRandom(bonusPool, 1)[0];
        state.bonus.push(b);
        saveState();
    }
}

/* Helpers */
function pickRandom(pool, n) {
    const arr = [...pool];
    const out = [];
    while (out.length < n) {
        const i = Math.floor(Math.random() * arr.length);
        out.push(arr.splice(i, 1)[0]);
    }
    return out;
}

function today() {
    return new Date().toLocaleDateString();
}
function weekID() {
    const d = new Date();
    return `${d.getFullYear()}-W${Math.floor((d.getDate() + 6) / 7)}`;
}

/* ----------------------------------------
   ACCEPT → BRIEFING → COMPLETE
------------------------------------------ */

let currentMission = null;

function acceptMission(type, mission) {
    state.accepted.push({ type, mission });
    state[type] = state[type].filter(m => m !== mission);
    saveState();
    render();
}

function openBriefing(missionObj) {
    currentMission = missionObj;
    document.getElementById("briefingText").innerText =
        "MISSION BRIEFING:\n\n" + missionObj.mission + "\n\nProceed?";
    document.getElementById("briefingBox").style.display = "block";
}

function closeBriefing() {
    document.getElementById("briefingBox").style.display = "none";
}

function confirmComplete() {
    const m = currentMission;
    let xpGain = 0;
    if (m.type === "daily") xpGain = 10;
    if (m.type === "weekly") xpGain = 30;
    if (m.type === "bonus") xpGain = 50;

    state.xp += xpGain;

    /* Streak system */
    if (state.lastCompletionDate !== today()) {
        state.streak += 1;
        state.lastCompletionDate = today();
    }

    /* Remove mission */
    state.accepted = state.accepted.filter(x => x !== m);

    saveState();
    closeBriefing();
    render();
}

/* ----------------------------------------
   RENDER
------------------------------------------ */

function renderList(id, arr, type) {
    const box = document.getElementById(id);
    box.innerHTML = "";
    arr.forEach(m => {
        const div = document.createElement("div");
        div.className = "mission";
        div.innerText = m;
        div.onclick = () => acceptMission(type, m);
        box.appendChild(div);
    });
}

function renderAccepted() {
    const box = document.getElementById("acceptedSection");
    box.innerHTML = "";
    state.accepted.forEach(m => {
        const d = document.createElement("div");
        d.className = "mission";
        d.innerText = `[${m.type.toUpperCase()}] ${m.mission}`;
        d.onclick = () => openBriefing(m);
        box.appendChild(d);
    });
}

function render() {
    renderList("daily", state.daily, "daily");
    renderList("weekly", state.weekly, "weekly");
    renderList("bonus", state.bonus, "bonus");
    renderAccepted();
    document.getElementById("xp").innerText = state.xp;
    document.getElementById("streak").innerText = state.streak;
}

/* ----------------------------------------
   BOOT SCREEN
------------------------------------------ */

const bootLines = [
    "JGSDF SYSTEM BOOTING...",
    "Loading mission protocols...",
    "Checking equipment...",
    "Synchronizing tactical database...",
    "Deploying mission board...",
    "System ready."
];

async function boot() {
    const screen = document.getElementById("bootScreen");
    let out = "";
    for (let line of bootLines) {
        out += line + "\n";
        screen.innerText = out;
        await new Promise(r => setTimeout(r, 500));
    }
    setTimeout(() => {
        screen.style.display = "none";
    }, 800);
}

/* ----------------------------------------
   INIT
------------------------------------------ */

function init() {
    if (state.dailyGenerated !== today()) newDay();
    if (state.weeklyGenerated !== weekID()) newWeek();
    randomBonus();
    render();
    boot();
}

init();

</script>

</body>
</html>
