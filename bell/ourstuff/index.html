<!DOCTYPE html>
<html>

<head>
    <title>HG鉄道仮部 | ホーム</title>
<script>
document.addEventListener('DOMContentLoaded', function() {

  // Hide all body children except scripts until login
  var pageChildren = Array.from(document.body.children);
  pageChildren.forEach(function(child) {
    if (child.tagName !== 'SCRIPT') child.style.display = 'none';
  });

  var form = document.createElement('form');
  form.id = 'login-form';
  form.style = 'margin:100px auto;max-width:300px;background:#eee;padding:20px;border-radius:10px;';
  form.innerHTML =
    '<h2>ログイン</h2>' +
    '<label>ユーザー名: <input type="text" id="username" required></label><br><br>' +
    '<label>パスワード: <input type="password" id="password" required></label><br><br>' +
    '<button type="submit">ログイン</button>';
  document.body.appendChild(form);

  form.onsubmit = async function(event) {
    event.preventDefault();
    var username = document.getElementById('username').value;
    var password = document.getElementById('password').value;
    try {
  var res = await fetch('/login/users.json', { cache: 'no-store' });
      var data = await res.json();
      var user = data.find(function(u) {
        return u.u === username && u.p === password;
      });
      if (user) {
        form.remove();
        pageChildren.forEach(function(child) {
          if (child.tagName !== 'SCRIPT') child.style.display = '';
        });
      } else {
        alert('ユーザー名またはパスワードが違います。');
      }
    } catch (e) {
      alert('ログイン情報の取得に失敗しました。');
    }
  };
});
</script>
  <!-- moved styles into /styles/site.css -->
</head>

<body>
  <div data-include="/includes/header.html" data-fallback="<a href='/index.html'>HG鉄道仮部</a>"></div>
  <h1>発車メロディー || HG鉄道仮部</h1>
  <marquee id="site-marquee" scrollamount="15">HG鉄道仮部へようこそ。</marquee>
  <script src="/scripts/marquee-loader.js"></script>
    <hr>

    <h1>ようこそ。</h1>
    <p>収録した発車メロディーを追加：</p>
    <a href="https://forms.gle/xShsMMZPQVD9truK8"><button id="newpost">新規アップロード</button></a>
    <hr>
    <a href="/bell/ourstuff/az/index.html"><button>ＡーＺ</button></a>
    <a href="/bell/ourstuff/aa/index.html"><button>あ〜お　か〜こ</button></a>
    <a href="/bell/ourstuff/sa/index.html"><button>さ〜そ　た〜と</button></a>
    <a href="/bell/ourstuff/na/index.html"><button>な〜の　は〜ほ</button></a>
    <a href="/bell/ourstuff/ma/index.html"><button>ま〜も　や〜よ</button></a>
    <a href="/bell/ourstuff/ra/index.html"><button>ら〜ろ　わ〜を</button></a>
</body>

</html>